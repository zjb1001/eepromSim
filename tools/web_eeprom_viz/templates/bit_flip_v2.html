{% extends "base.html" %}

{% block title %}ä½ç¿»è½¬ä¾¦æ¢ - æ•°æ®ç ´åè°ƒæŸ¥{% endblock %}

{% block content %}
<div class="page-shell container-fluid h-100 d-flex flex-column">
    <!-- é¡¶éƒ¨æ ‡é¢˜ -->
    <div class="mb-3">
        <h2 class="mb-2">ğŸ” æ•°æ®ç ´åä¾¦æ¢: æ‰¾åˆ°è¢«ç¿»è½¬çš„ä½ï¼</h2>
        <div class="alert alert-info mb-0">
            <strong>ğŸ® æ¸¸æˆè§„åˆ™:</strong> æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­æŸäº›ä½å¯èƒ½è¢«ç¿»è½¬ï¼ˆ0â†’1æˆ–1â†’0ï¼‰ã€‚
            ä½œä¸ºä¾¦æ¢ï¼Œä½ éœ€è¦ï¼šè§‚å¯Ÿæ•°æ®â†’å‘ç°å¼‚å¸¸â†’éªŒè¯CRCâ†’æ‰¾å‡ºæ•…éšœï¼<br>
            <small>CRC16æ ¡éªŒèƒ½æ£€æµ‹åˆ°ä»»ä½•ä½çš„å˜åŒ–ï¼Œå“ªæ€•åªç¿»è½¬1ä½ï¼</small>
        </div>
    </div>

    <!-- å·¦å³å¸ƒå±€: å·¦ä¾§å¯è§†åŒ–ï¼Œå³ä¾§æ“ä½œ -->
    <div class="row flex-grow-1 g-3">
        <!-- å·¦ä¾§: å¯è§†åŒ–åŒºåŸŸ (58%) -->
        <div class="col-lg-7">
            <div class="d-flex flex-column gap-3 h-100">
                <!-- å…³å¡ä¿¡æ¯ -->
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">ğŸ¯ å…³å¡ <span id="levelDisplay">1</span>/3</h5>
                        <div>
                            <span class="badge bg-primary">å¾—åˆ†: <span id="scoreDisplay">0</span></span>
                            <span class="badge bg-success ms-2" id="statusBadge">è°ƒæŸ¥ä¸­</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="levelTask" class="alert alert-secondary mb-0">
                            <strong>Level 1:</strong> æ£€æµ‹1ä¸ªä½ç¿»è½¬ - æ•°æ®ä¼ è¾“ä¸­æœ‰1ä½è¢«ç¿»è½¬ï¼Œä½ èƒ½æ‰¾åˆ°å—ï¼Ÿ
                        </div>
                    </div>
                </div>

                <!-- æ•°æ®å¯¹æ¯”åŒºåŸŸ -->
                <div class="row flex-grow-1">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header bg-primary text-white">
                                <h6 class="mb-0">ğŸ“¥ åŸå§‹æ•°æ® (å‘é€ç«¯)</h6>
                            </div>
                            <div class="card-body d-flex flex-column">
                                <div id="originalData" class="binary-grid flex-grow-1">
                                    <!-- 16å­—èŠ‚ x 8ä½ -->
                                </div>
                                <div class="text-center mt-2">
                                    <small class="text-muted">CRC16: </small>
                                    <code id="originalCrc" class="badge bg-success">0x0000</code>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-header bg-warning text-dark">
                                <h6 class="mb-0">ğŸ“¤ æ¥æ”¶æ•°æ® (å¯èƒ½æœ‰æŸå)</h6>
                            </div>
                            <div class="card-body d-flex flex-column">
                                <div id="receivedData" class="binary-grid flex-grow-1">
                                    <!-- 16å­—èŠ‚ x 8ä½ -->
                                </div>
                                <div class="text-center mt-2">
                                    <small class="text-muted">CRC16: </small>
                                    <code id="receivedCrc" class="badge bg-danger">0x0000</code>
                                    <span id="crcMismatch" class="badge bg-danger ms-2" style="display:none;">âŒ ä¸åŒ¹é…!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- é€ä½å¯¹æ¯” -->
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">ğŸ” é€ä½å¯¹æ¯”åˆ†æ</h6>
                    </div>
                    <div class="card-body">
                        <div id="bitComparison" class="comparison-grid">
                            <!-- é€ä½å¯¹æ¯” -->
                        </div>
                    </div>
                </div>

                <!-- æ¢å¤ç­–ç•¥ -->
                <div class="card" id="recoveryCard" style="display:none;">
                    <div class="card-header bg-danger">
                        <h5 class="mb-0">ğŸš¨ æ•°æ®æŸåæ£€æµ‹ï¼æ¢å¤ç­–ç•¥</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card border-danger">
                                    <div class="card-body text-center">
                                        <h6>Native Block</h6>
                                        <p class="text-danger">âŒ æ— å¤‡ä»½</p>
                                    <small>æ•°æ®æ°¸ä¹…ä¸¢å¤±</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card border-warning">
                                <div class="card-body text-center">
                                    <h6>Redundant Block</h6>
                                    <p class="text-warning">âœ… åŒå¤‡ä»½</p>
                                    <small>ä»å¤‡ä»½æ¢å¤</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card border-success">
                                <div class="card-body text-center">
                                    <h6>Dataset Block</h6>
                                    <p class="text-success">âœ… å¤šç‰ˆæœ¬</p>
                                    <small>å›é€€åˆ°å†å²ç‰ˆæœ¬</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§: æ“ä½œé¢æ¿ (42%) -->
        <div class="col-lg-5">
            <div class="d-flex flex-column gap-3 h-100">
                <!-- ä¾¦æ¢å·¥å…· -->
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">ğŸ•µï¸ ä¾¦æ¢å·¥å…·</h5>
                    </div>
                    <div class="card-body">
                        <label class="form-label mb-2">ç¿»è½¬æ§åˆ¶:</label>
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-danger" onclick="injectBitFlip(1)">
                                ğŸ’¥ æ³¨å…¥1ä½ç¿»è½¬ (Level 1)
                            </button>
                            <button class="btn btn-outline-warning" onclick="injectBitFlip(2)" id="btnFlip2" disabled>
                                ğŸ’¥ğŸ’¥ æ³¨å…¥2ä½ç¿»è½¬ (Level 2)
                            </button>
                            <button class="btn btn-outline-dark" onclick="injectBitFlip(3)" id="btnFlip3" disabled>
                                ğŸ’¥ğŸ’¥ğŸ’¥ æ³¨å…¥3ä½ç¿»è½¬ (Level 3)
                            </button>
                        </div>

                        <hr>

                        <div class="alert alert-warning small mb-0">
                            <strong>ğŸ’¡ æç¤º:</strong>
                            <ul class="mb-0 mt-2">
                                <li>ç‚¹å‡»"æ³¨å…¥ä½ç¿»è½¬"æ¨¡æ‹Ÿæ•°æ®æŸå</li>
                                <li>CRCä¸åŒ¹é…è¯´æ˜æ•°æ®è¢«ç¯¡æ”¹</li>
                                <li>å¯¹æ¯”åŸå§‹å’Œæ¥æ”¶æ•°æ®æ‰¾å‡ºå·®å¼‚</li>
                                <li>ä¸åŒä½ç¿»è½¬æ•°CRCæ£€æµ‹æ¦‚ç‡ä¸åŒ</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- è°ƒæŸ¥æ—¥å¿— -->
                <div class="card flex-grow-1">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">ğŸ“Š è°ƒæŸ¥æ—¥å¿—</h5>
                    </div>
                    <div class="card-body" style="max-height: 250px; overflow-y: auto; font-size: 12px;">
                        <div id="investigationLog">
                            <p class="text-muted text-center">ç­‰å¾…è°ƒæŸ¥å¼€å§‹...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- æˆåŠŸåº†ç¥æ¨¡æ€æ¡† -->
    <div class="modal" id="levelCompleteModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">ğŸ‰ å…³å¡å®Œæˆï¼</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6>âœ… ä½ æˆåŠŸæ‰¾åˆ°äº†æ•°æ®æŸåï¼</h6>
                    <div id="levelSummary"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="nextLevel()">
                        ä¸‹ä¸€å…³ â¡ï¸
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        ç»§ç»­è°ƒæŸ¥
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* ç¡®ä¿ä¸»è¦å†…å®¹åŒºåŸŸå……æ»¡å¯ç”¨ç©ºé—´ï¼Œä½†ä¸å½±å“å¯¼èˆªæ å®¹å™¨ */
.page-shell {
    min-height: calc(100vh - 100px);
}

.binary-grid {
    display: grid;
    grid-template-columns: repeat(16, 1fr);
    gap: 0;
    font-size: 7px;
    font-family: monospace;
    max-width: 100%;
}

.byte-cell {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    transition: all 0.3s ease;
}

.byte-hex {
    font-weight: bold;
    color: #495057;
    margin-bottom: 0;
    font-size: 7px;
}

.byte-bits {
    display: flex;
    gap: 0;
}

.bit {
    width: 6px;
    height: 9px;
    text-align: center;
    font-size: 6px;
    line-height: 9px;
    color: #6c757d;
    border: 1px solid #e9ecef;
}

.bit-flipped {
    background: #ff6b6b;
    color: white;
    animation: highlight-flip 1s infinite;
    font-weight: bold;
}

@keyframes highlight-flip {
    0%, 100% { background: #ff6b6b; }
    50% { background: #ffe66d; }
}

.comparison-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 10px;
}

.comparison-byte {
    border: 1px solid #dee2e6;
    padding: 10px;
    border-radius: 4px;
    text-align: center;
}

.comparison-byte.flipped {
    border-color: #ff6b6b;
    background: #fff5f5;
}

.comparison-bits {
    display: flex;
    justify-content: center;
    gap: 4px;
    margin: 10px 0;
}

.comparison-bit {
    width: 25px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: monospace;
    font-weight: bold;
    background: #f8f9fa;
    border-radius: 3px;
}

.comparison-bit.different {
    background: #ff6b6b;
    color: white;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.log-entry {
    padding: 6px;
    margin-bottom: 5px;
    border-radius: 4px;
    font-family: monospace;
    font-size: 11px;
    border-left: 3px solid #0dcaf0;
}

/* å“åº”å¼ */
@media (max-width: 991px) {
    .page-shell {
        min-height: auto;
    }

    .binary-grid {
        grid-template-columns: repeat(8, 1fr);
    }

    .byte-cell {
        padding: 2px;
    }

    .bit {
        width: 8px;
        height: 12px;
        font-size: 8px;
        line-height: 12px;
    }
}
</style>
{% endblock %}

{% block scripts %}
<script>
let originalData = [];
let receivedData = [];
let currentLevel = 1;
let score = 0;
let flippedBits = [];

// åˆå§‹åŒ–æ•°æ®
function initData() {
    originalData = [];
    for (let i = 0; i < 16; i++) {
        // ç”Ÿæˆéšæœºæ•°æ®
        originalData.push(Math.floor(Math.random() * 256));
    }
    receivedData = [...originalData];
    flippedBits = [];

    updateDisplay();
    addLog('ğŸ“Š æ•°æ®å·²ç”Ÿæˆ: 16å­—èŠ‚éšæœºæ•°æ®', 'info');
    addLog(`âœ… åŸå§‹CRC16: ${calculateCRC(originalData)}`, 'info');
}

// è®¡ç®—CRC16ï¼ˆç®€åŒ–ç‰ˆï¼Œä»…ç”¨äºæ¼”ç¤ºï¼‰
function calculateCRC(data) {
    // ç®€åŒ–çš„CRCè®¡ç®—ï¼ˆå®é™…åº”ç”¨éœ€ä½¿ç”¨æ ‡å‡†CRC16ç®—æ³•ï¼‰
    let crc = 0xFFFF;
    for (let byte of data) {
        crc ^= byte << 8;
        for (let i = 0; i < 8; i++) {
            if (crc & 0x8000) {
                crc = (crc << 1) ^ 0x1021;
            } else {
                crc = crc << 1;
            }
        }
    }
    return '0x' + (crc & 0xFFFF).toString(16).toUpperCase().padStart(4, '0');
}

// æ³¨å…¥ä½ç¿»è½¬
async function injectBitFlip(numBits) {
    if (flippedBits.length > 0) {
        if (!confirm('å·²æœ‰ä½ç¿»è½¬ï¼Œæ˜¯å¦é‡æ–°å¼€å§‹ï¼Ÿ')) {
            return;
        }
        initData();
    }

    addLog(`ğŸ’¥ æ³¨å…¥${numBits}ä½ç¿»è½¬...`, 'warning');
    await sleep(300);

    flippedBits = [];
    const byteIndices = [];
    const bitIndices = [];

    // é€‰æ‹©éšæœºçš„å­—èŠ‚å’Œä½
    for (let i = 0; i < numBits; i++) {
        let byteIdx, bitIdx;
        do {
            byteIdx = Math.floor(Math.random() * 16);
            bitIdx = Math.floor(Math.random() * 8);
        } while (flippedBits.some(f => f.byteIdx === byteIdx && f.bitIdx === bitIdx));

        flippedBits.push({ byteIdx, bitIdx });
        byteIndices.push(byteIdx);
        bitIndices.push(bitIdx);

        // ç¿»è½¬ä½
        receivedData[byteIdx] ^= (1 << bitIdx);
    }

    await sleep(300);

    // æ›´æ–°æ˜¾ç¤º
    updateDisplay();
    highlightFlippedBits();

    // æ˜¾ç¤ºCRCæ£€æµ‹ç»“æœ
    const originalCrc = calculateCRC(originalData);
    const receivedCrc = calculateCRC(receivedData);

    addLog(`âš ï¸ æ•°æ®æŸåæ£€æµ‹ï¼`, 'error');
    addLog(`åŸå§‹CRC: ${originalCrc}`, 'info');
    addLog(`æ¥æ”¶CRC: ${receivedCrc}`, 'error');
    addLog(`âŒ CRCä¸åŒ¹é…ï¼æ•°æ®å·²æŸå`, 'error');

    document.getElementById('crcMismatch').style.display = 'inline';
    document.getElementById('statusBadge').textContent = 'å‘ç°æŸå';
    document.getElementById('statusBadge').className = 'badge bg-danger ms-2';

    // æ˜¾ç¤ºæ¢å¤ç­–ç•¥
    document.getElementById('recoveryCard').style.display = 'block';

    // æ˜¾ç¤ºå¯¹æ¯”
    showComparison();

    // å¾—åˆ†
    score += numBits * 100;
    document.getElementById('scoreDisplay').textContent = score;

    // è§£é”ä¸‹ä¸€å…³æŒ‰é’®
    if (currentLevel === 1) {
        document.getElementById('btnFlip2').disabled = false;
        addLog(`âœ… Level 1å®Œæˆï¼è§£é”Level 2`, 'success');

        // æ˜¾ç¤ºæˆåŠŸæ¨¡æ€æ¡†
        setTimeout(() => {
            showLevelComplete();
        }, 1000);
    } else if (currentLevel === 2) {
        document.getElementById('btnFlip3').disabled = false;
        addLog(`âœ… Level 2å®Œæˆï¼è§£é”Level 3`, 'success');

        setTimeout(() => {
            showLevelComplete();
        }, 1000);
    } else {
        addLog(`ğŸ‰ æ­å–œï¼æ‰€æœ‰å…³å¡å®Œæˆï¼`, 'success');

        setTimeout(() => {
            showLevelComplete();
        }, 1000);
    }
}

// é«˜äº®ç¿»è½¬çš„ä½
function highlightFlippedBits() {
    const receivedDiv = document.getElementById('receivedData');
    const cells = receivedDiv.querySelectorAll('.byte-cell');

    flippedBits.forEach(({ byteIdx, bitIdx }) => {
        const cell = cells[byteIdx];
        const bit = cell.querySelectorAll('.bit')[7 - bitIdx]; // å·¦åˆ°å³æ˜¾ç¤ºbit7åˆ°bit0
        bit.classList.add('bit-flipped');
    });
}

// æ˜¾ç¤ºå¯¹æ¯”
function showComparison() {
    const comparisonDiv = document.getElementById('bitComparison');
    comparisonDiv.innerHTML = '';

    for (let i = 0; i < 16; i++) {
        const isFlipped = flippedBits.some(f => f.byteIdx === i);
        const div = document.createElement('div');
        div.className = `comparison-byte ${isFlipped ? 'flipped' : ''}`;

        const originalByte = originalData[i];
        const receivedByte = receivedData[i];

        let bitsHtml = '<div class="comparison-bits">';
        for (let bit = 7; bit >= 0; bit--) {
            const originalBit = (originalByte >> bit) & 1;
            const receivedBit = (receivedByte >> bit) & 1;
            const isDifferent = originalBit !== receivedBit;

            bitsHtml += `
                <div class="comparison-bit ${isDifferent ? 'different' : ''}">
                    ${receivedBit}
                </div>
            `;
        }
        bitsHtml += '</div>';

        div.innerHTML = `
            <strong>Byte ${i}</strong>
            <div class="text-muted small">0x${originalByte.toString(16).toUpperCase()}</div>
            ${bitsHtml}
            ${isFlipped ? '<small class="text-danger">âš ï¸ æœ‰ä½ç¿»è½¬</small>' : '<small class="text-success">âœ“ æ­£å¸¸</small>'}
        `;

        comparisonDiv.appendChild(div);
    }
}

// æ›´æ–°æ˜¾ç¤º
function updateDisplay() {
    const originalDiv = document.getElementById('originalData');
    const receivedDiv = document.getElementById('receivedData');

    originalDiv.innerHTML = '';
    receivedDiv.innerHTML = '';

    for (let i = 0; i < 16; i++) {
        originalDiv.innerHTML += createByteCell(originalData[i], i);
        receivedDiv.innerHTML += createByteCell(receivedData[i], i);
    }

    document.getElementById('originalCrc').textContent = calculateCRC(originalData);
    document.getElementById('receivedCrc').textContent = calculateCRC(receivedData);
}

// åˆ›å»ºå­—èŠ‚å•å…ƒæ ¼
function createByteCell(value, index) {
    const hex = value.toString(16).toUpperCase().padStart(2, '0');
    let bits = '';

    for (let bit = 7; bit >= 0; bit--) {
        const bitValue = (value >> bit) & 1;
        bits += `<span class="bit">${bitValue}</span>`;
    }

    return `
        <div class="byte-cell">
            <span class="byte-hex">${hex}</span>
            <span class="byte-bits">${bits}</span>
        </div>
    `;
}

// æ·»åŠ æ—¥å¿—
function addLog(message, type = 'info') {
    const log = document.getElementById('investigationLog');
    const entry = document.createElement('div');
    entry.className = 'log-entry';
    entry.textContent = message;

    if (log.querySelector('.text-muted')) {
        log.innerHTML = '';
    }

    log.insertBefore(entry, log.firstChild);
}

// æ˜¾ç¤ºå…³å¡å®Œæˆ
function showLevelComplete() {
    const modal = new bootstrap.Modal(document.getElementById('levelCompleteModal'));

    let summary = '';
    if (currentLevel === 1) {
        summary = `
            <p>ä½ æˆåŠŸæ£€æµ‹åˆ°${flippedBits.length}ä¸ªä½ç¿»è½¬ï¼</p>
            <ul>
                <li>âœ… CRC16æˆåŠŸæ£€æµ‹åˆ°æ•°æ®æŸå</li>
                <li>âœ… å³ä½¿åªç¿»è½¬1ä½ï¼ŒCRCä¹Ÿèƒ½å‘ç°</li>
                <li>ğŸ“š çŸ¥è¯†ç‚¹: CRCæ˜¯å¼ºå¤§çš„é”™è¯¯æ£€æµ‹æœºåˆ¶</li>
            </ul>
        `;
    } else if (currentLevel === 2) {
        summary = `
            <p>ä½ æˆåŠŸæ£€æµ‹åˆ°${flippedBits.length}ä¸ªä½ç¿»è½¬ï¼</p>
            <ul>
                <li>âœ… CRCæ£€æµ‹æ¦‚ç‡: 100%</li>
                <li>ğŸ“š çŸ¥è¯†ç‚¹: å¤šä½ç¿»è½¬CRCä»èƒ½æ£€æµ‹</li>
            </ul>
        `;
    } else {
        summary = `
            <p>ğŸ‰ æ­å–œä½ å®Œæˆæ‰€æœ‰å…³å¡ï¼</p>
            <p>æ€»åˆ†: ${score}åˆ†</p>
            <ul>
                <li>âœ… ç†è§£äº†ä½ç¿»è½¬æ•…éšœ</li>
                <li>âœ… äº†è§£äº†CRCçš„æ£€æµ‹èƒ½åŠ›</li>
                <li>âœ… æŒæ¡äº†æ•°æ®æ¢å¤ç­–ç•¥</li>
            </ul>
            <p><strong>ä½ å·²ç»æ˜¯æ•°æ®ä¾¦æ¢ä¸“å®¶äº†ï¼</strong></p>
        `;
    }

    document.getElementById('levelSummary').innerHTML = summary;
    modal.show();
}

// ä¸‹ä¸€å…³
function nextLevel() {
    if (currentLevel < 3) {
        currentLevel++;
        document.getElementById('levelDisplay').textContent = currentLevel;
        document.getElementById('levelTask').innerHTML = getLevelTask(currentLevel);

        // é‡ç½®çŠ¶æ€
        document.getElementById('crcMismatch').style.display = 'none';
        document.getElementById('statusBadge').textContent = 'è°ƒæŸ¥ä¸­';
        document.getElementById('statusBadge').className = 'badge bg-success ms-2';
        document.getElementById('recoveryCard').style.display = 'none';

        initData();
    }
}

// è·å–å…³å¡ä»»åŠ¡
function getLevelTask(level) {
    if (level === 1) {
        return '<strong>Level 1:</strong> æ£€æµ‹1ä¸ªä½ç¿»è½¬ - æ•°æ®ä¼ è¾“ä¸­æœ‰1ä½è¢«ç¿»è½¬ï¼Œä½ èƒ½æ‰¾åˆ°å—ï¼Ÿ';
    } else if (level === 2) {
        return '<strong>Level 2:</strong> æ£€æµ‹2ä¸ªä½ç¿»è½¬ - æ›´å¤æ‚çš„æ•°æ®æŸåï¼ŒCRCè¿˜èƒ½æ£€æµ‹åˆ°å—ï¼Ÿ';
    } else {
        return '<strong>Level 3:</strong> æ£€æµ‹3ä¸ªä½ç¿»è½¬ - ç»ˆææŒ‘æˆ˜ï¼Œæµ‹è¯•CRCçš„æé™èƒ½åŠ›ï¼';
    }
}

// è¾…åŠ©å‡½æ•°
function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

// é¡µé¢åŠ è½½åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    initData();
});
</script>
{% endblock %}
